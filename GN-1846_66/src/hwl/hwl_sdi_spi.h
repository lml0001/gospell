#ifndef HWL_SDI_SPI_H
#define HWL_SDI_SPI_H

#include "multi_hwl.h"

#define SDI_DEBUG 0			/* SDI调试开关 */

#define GLOBAL_SDI_DEBUG(x, n) \
	{ \
		if (n) { \
			GLOBAL_TRACE (x); \
		} \
	}

/* GS2970 Reg */
/* -- Video Core Configuration and Status Registers -- */
#define GS2970_REG_IOPROC_1 0x000
#define GS2970_REG_IOPROC_2 0x001
#define GS2970_REG_ERROR_STAT_1 0x002
#define GS2970_REG_ERROR_STAT_2 0x003
#define GS2970_REG_EDH_FLAG_IN 0x004
#define GS2970_REG_EDH_FLAG_OUT 0x005
#define GS2970_REG_DATA_FORMAT_DS1 0x006
#define GS2970_REG_DATA_FORMAT_DS2 0x007
#define GS2970_REG_IO_CONFIG 0x008
#define GS2970_REG_IO_CONFIG2 0x009
#define GS2970_REG_ANC_CONTROL 0x00A
#define GS2970_REG_ANC_LINE_A 0x00B
#define GS2970_REG_ANC_LINE_B 0x00C
// 0x00D - 0x00E 保留
#define GS2970_REG_ANC_TYPE1_AP2 0x00F
#define GS2970_REG_ANC_TYPE2_AP2 0x010
#define GS2970_REG_ANC_TYPE_3_AP1 0x011
#define GS2970_REG_ANC_TYPE_4_AP1 0x012
#define GS2970_REG_ANC_TYPE_5_AP1 0x013
#define GS2970_REG_ANC_TYPE_1_AP2 0x014
#define GS2970_REG_ANC_TYPE_2_AP2 0x015
#define GS2970_REG_ANC_TYPE_3_AP2 0x016
#define GS2970_REG_ANC_TYPE_4_AP2 0x017
#define GS2970_REG_ANC_TYPE_5_AP2 0x018
#define GS2970_REG_VIDEO_FORMAT_352_A_1 0x019
#define GS2970_REG_VIDEO_FORMAT_352_B_1 0x01A
#define GS2970_REG_VIDEO_FORMAT_352_A_2 0x01B
#define GS2970_REG_VIDEO_FORMAT_352_B_2 0x01C
#define GS2970_REG_VIDEO_FORMAT_352_INS_A 0x01D
#define GS2970_REG_VIDEO_FORMAT_352_INS_B 0x01E
#define GS2970_REG_RASTER_STRUC_1 0x01F
#define GS2970_REG_RASTER_STRUC_2 0x020
#define GS2970_REG_RASTER_STRUC_3 0x021
#define GS2970_REG_RASTER_STRUC_4 0x022
#define GS2970_REG_FLYWHEEL_STATUS 0x023
#define GS2970_REG_RATE_SEL 0x024
#define GS2970_REG_TIM_861_FORMAT 0x025
#define GS2970_REG_TIM_861_CFG 0x026
// 0x027 - 0x036 保留
#define GS2970_REG_ERROR_MASK_1 0x037
#define GS2970_REG_ERROR_MASK_2 0x038
#define GS2970_REG_AGC_CTRL 0x039
// 0x03A - 0x06B 保留
#define GS2970_REG_CLK_GEN 0x06C
#define GS2970_REG_IO_DRIVE_STRENGTH 0x06D
#define GS2970_REG_IO_DRIVE_STRENGTH_CONST_VAL 0x002B /* 该寄存器的固定值为0x2B，用于判读是否SDI芯片存在 */
// 0x06E - 0x085 保留
/* -- SD Audio Core Configuration and Status Registers -- */
#define GS2970_REG_CFG_AUD_SD 0x400
#define GS2970_REG_DBN_ERR_SD 0x401
#define GS2970_REG_REGEN_SD 0x402
#define GS2970_REG_AUD_DET_SD 0x403
#define GS2970_REG_CSUM_ERR_DET_SD 0x404
#define GS2970_REG_CH_MUTE_SD 0x405
#define GS2970_REG_CH_VALID_SD 0x406
#define GS2970_REG_INT_ENABLE_SD 0x407
#define GS2970_REG_CFG_OUTPUT_SD 0x408
#define GS2970_REG_OUTPUT_SEL_1_SD 0x409
#define GS2970_REG_OUTPUT_SEL_2_SD 0x40A
// 0x40B - 0x41F 保留
#define GS2970_REG_AFNA12_SD 0x420
#define GS2970_REG_AFNA34_SD 0x421
#define GS2970_REG_RATEA_SD 0x422
#define GS2970_REG_ACT_A_SD 0x423
#define GS2970_REG_PRIM_AUD_DELAY_1_SD 0x424
#define GS2970_REG_PRIM_AUD_DELAY_2_SD 0x425
#define GS2970_REG_PRIM_AUD_DELAY_3_SD 0x426
#define GS2970_REG_PRIM_AUD_DELAY_4_SD 0x427
#define GS2970_REG_PRIM_AUD_DELAY_5_SD 0x428
#define GS2970_REG_PRIM_AUD_DELAY_6_SD 0x429
#define GS2970_REG_PRIM_AUD_DELAY_7_SD 0x42A
#define GS2970_REG_PRIM_AUD_DELAY_8_SD 0x42B
#define GS2970_REG_PRIM_AUD_DELAY_9_SD 0x42C
#define GS2970_REG_PRIM_AUD_DELAY_10_SD 0x42D
#define GS2970_REG_PRIM_AUD_DELAY_11_SD 0x42E
#define GS2970_REG_PRIM_AUD_DELAY_12_SD 0x42F
#define GS2970_REG_AFNB12_SD 0x430
#define GS2970_REG_AFNB34_SD 0x431
#define GS2970_REG_RATEB_SD 0x432
#define GS2970_REG_ACT_B_SD 0x433
#define GS2970_REG_SEC_AUD_DELAY_1_SD 0x434
#define GS2970_REG_SEC_AUD_DELAY_2_SD 0x435
#define GS2970_REG_SEC_AUD_DELAY_3_SD 0x436
#define GS2970_REG_SEC_AUD_DELAY_4_SD 0x437
#define GS2970_REG_SEC_AUD_DELAY_5_SD 0x438
#define GS2970_REG_SEC_AUD_DELAY_6_SD 0x439
#define GS2970_REG_SEC_AUD_DELAY_7_SD 0x43A
#define GS2970_REG_SEC_AUD_DELAY_8_SD 0x43B
#define GS2970_REG_SEC_AUD_DELAY_9_SD 0x43C
#define GS2970_REG_SEC_AUD_DELAY_10_SD 0x43D
#define GS2970_REG_SEC_AUD_DELAY_11_SD 0x43E
#define GS2970_REG_SEC_AUD_DELAY_12_SD 0x43F
#define GS2970_REG_ACSR1_2A_BYTE0_1_SD 0x440
#define GS2970_REG_ACSR1_2A_BYTE2_3_SD 0x441
#define GS2970_REG_ACSR1_2A_BYTE4_5_SD 0x442
#define GS2970_REG_ACSR1_2A_BYTE6_7_SD 0x443
#define GS2970_REG_ACSR1_2A_BYTE8_9_SD 0x444
#define GS2970_REG_ACSR1_2A_BYTE10_11_SD 0x445
#define GS2970_REG_ACSR1_2A_BYTE12_13_SD 0x446
#define GS2970_REG_ACSR1_2A_BYTE14_15_SD 0x447
#define GS2970_REG_ACSR1_2A_BYTE16_17_SD 0x448
#define GS2970_REG_ACSR1_2A_BYTE18_19_SD 0x449
#define GS2970_REG_ACSR1_2A_BYTE20_21_SD 0x44A
#define GS2970_REG_ACSR1_2A_BYTE22_SD 0x44B
#define GS2970_REG_ACSR3_4A_BYTE0_1_SD 0x450
#define GS2970_REG_ACSR3_4A_BYTE2_3_SD 0x451
#define GS2970_REG_ACSR3_4A_BYTE4_5_SD 0x452
#define GS2970_REG_ACSR3_4A_BYTE6_7_SD 0x453
#define GS2970_REG_ACSR3_4A_BYTE8_9_SD 0x454
#define GS2970_REG_ACSR3_4A_BYTE10_11_SD 0x455
#define GS2970_REG_ACSR3_4A_BYTE12_13_SD 0x456
#define GS2970_REG_ACSR3_4A_BYTE14_15_SD 0x457
#define GS2970_REG_ACSR3_4A_BYTE16_17_SD 0x458
#define GS2970_REG_ACSR3_4A_BYTE18_19_SD 0x459
#define GS2970_REG_ACSR3_4A_BYTE20_21_SD 0x45A
#define GS2970_REG_ACSR3_4A_BYTE22_SD 0x45B
#define GS2970_REG_ACSR1_2B_BYTE0_1_SD 0x460
#define GS2970_REG_ACSR1_2B_BYTE2_3_SD 0x461
#define GS2970_REG_ACSR1_2B_BYTE4_5_SD 0x462
#define GS2970_REG_ACSR1_2B_BYTE6_7_SD 0x463
#define GS2970_REG_ACSR1_2B_BYTE8_9_SD 0x464
#define GS2970_REG_ACSR1_2B_BYTE10_11_SD 0x465
#define GS2970_REG_ACSR1_2B_BYTE12_13_SD 0x466
#define GS2970_REG_ACSR1_2B_BYTE14_15_SD 0x467
#define GS2970_REG_ACSR1_2B_BYTE16_17_SD 0x468
#define GS2970_REG_ACSR1_2B_BYTE18_19_SD 0x469
#define GS2970_REG_ACSR1_2B_BYTE20_21_SD 0x46A
#define GS2970_REG_ACSR1_2B_BYTE22_SD 0x46B
#define GS2970_REG_ACSR3_4B_BYTE0_1_SD 0x470
#define GS2970_REG_ACSR3_4B_BYTE2_3_SD 0x471
#define GS2970_REG_ACSR3_4B_BYTE4_5_SD 0x472
#define GS2970_REG_ACSR3_4B_BYTE6_7_SD 0x473
#define GS2970_REG_ACSR3_4B_BYTE8_9_SD 0x474
#define GS2970_REG_ACSR3_4B_BYTE10_11_SD 0x475
#define GS2970_REG_ACSR3_4B_BYTE12_13_SD 0x476
#define GS2970_REG_ACSR3_4B_BYTE14_15_SD 0x477
#define GS2970_REG_ACSR3_4B_BYTE16_17_SD 0x478
#define GS2970_REG_ACSR3_4B_BYTE18_19_SD 0x479
#define GS2970_REG_ACSR3_4B_BYTE20_21_SD 0x47A
#define GS2970_REG_ACSR3_4B_BYTE22_SD 0x47B
#define GS2970_REG_ACSR_BYTE_0_SD 0x480
#define GS2970_REG_ACSR_BYTE_1_SD 0x481
#define GS2970_REG_ACSR_BYTE_2_SD 0x482
#define GS2970_REG_ACSR_BYTE_3_SD 0x483
#define GS2970_REG_ACSR_BYTE_4_SD 0x484
#define GS2970_REG_ACSR_BYTE_5_SD 0x485
#define GS2970_REG_ACSR_BYTE_6_SD 0x486
#define GS2970_REG_ACSR_BYTE_7_SD 0x487
#define GS2970_REG_ACSR_BYTE_8_SD 0x488
#define GS2970_REG_ACSR_BYTE_9_SD 0x489
#define GS2970_REG_ACSR_BYTE_10_SD 0x48A
#define GS2970_REG_ACSR_BYTE_11_SD 0x48B
#define GS2970_REG_ACSR_BYTE_12_SD 0x48C
#define GS2970_REG_ACSR_BYTE_13_SD 0x48D
#define GS2970_REG_ACSR_BYTE_14_SD 0x48E
#define GS2970_REG_ACSR_BYTE_15_SD 0x48F
#define GS2970_REG_ACSR_BYTE_16_SD 0x490
#define GS2970_REG_ACSR_BYTE_17_SD 0x491
#define GS2970_REG_ACSR_BYTE_18_SD 0x492
#define GS2970_REG_ACSR_BYTE_19_SD 0x493
#define GS2970_REG_ACSR_BYTE_20_SD 0x494
#define GS2970_REG_ACSR_BYTE_21_SD 0x495
#define GS2970_REG_ACSR_BYTE_22_SD 0x496
/* -- HD and 3G Audio Core Registers -- */
#define GS2970_REG_CFG_AUD_HD_3G 0x200
#define GS2970_REG_ACS_DET_HD_3G 0x201
#define GS2970_REG_AUD_DET1_HD_3G 0x202
#define GS2970_REG_AUD_DET2_HD_3G 0x203
#define GS2970_REG_REGEN_HD_3G 0x204
#define GS2970_REG_CH_MUTE_HD_3G 0x205
#define GS2970_REG_CH_VALID_HD_3G 0x206
#define GS2970_REG_INT_ENABLE_HD_3G 0x207
#define GS2970_REG_CFG_AUD_2_HD_3G 0x208
#define GS2970_REG_CFG_AUD_3_HD_3G 0x209
#define GS2970_REG_OUTPUT_SEL_1_HD_3G 0x20A
#define GS2970_REG_OUTPUT_SEL_2_HD_3G 0x20B
// 0x20C - 0x21F 保留
#define GS2970_REG_AFNA_HD_3G 0x220
#define GS2970_REG_RATEA_HD_3G 0x221
#define GS2970_REG_ACTA_HD_3G 0x222
#define GS2970_REG_PRIM_AUD_DELAY_1_HD_3G 0x223
#define GS2970_REG_PRIM_AUD_DELAY_2_HD_3G 0x224
#define GS2970_REG_PRIM_AUD_DELAY_3_HD_3G 0x225
#define GS2970_REG_PRIM_AUD_DELAY_4_HD_3G 0x226
#define GS2970_REG_PRIM_AUD_DELAY_5_HD_3G 0x227
#define GS2970_REG_PRIM_AUD_DELAY_6_HD_3G 0x228
// 0x229 - 0x22F 保留
#define GS2970_REG_AFNB_HD_3G 0x230
#define GS2970_REG_RATEB_HD_3G 0x231
#define GS2970_REG_ACTB_HD_3G 0x232
#define GS2970_REG_SEC_AUD_DELAY_1_HD_3G 0x233
#define GS2970_REG_SEC_AUD_DELAY_2_HD_3G 0x234
#define GS2970_REG_SEC_AUD_DELAY_3_HD_3G 0x235
#define GS2970_REG_SEC_AUD_DELAY_4_HD_3G 0x236
#define GS2970_REG_SEC_AUD_DELAY_5_HD_3G 0x237
#define GS2970_REG_SEC_AUD_DELAY_6_HD_3G 0x238
// 0x239 - 0x23F 保留
#define GS2970_REG_ACSR1_2A_BYTE0_1_HD_3G 0x240
#define GS2970_REG_ACSR1_2A_BYTE2_3_HD_3G 0x241
#define GS2970_REG_ACSR1_2A_BYTE4_5_HD_3G 0x242
#define GS2970_REG_ACSR1_2A_BYTE6_7_HD_3G 0x243
#define GS2970_REG_ACSR1_2A_BYTE8_9_HD_3G 0x244
#define GS2970_REG_ACSR1_2A_BYTE10_11_HD_3G 0x245
#define GS2970_REG_ACSR1_2A_BYTE12_13_HD_3G 0x246
#define GS2970_REG_ACSR1_2A_BYTE14_15_HD_3G 0x247
#define GS2970_REG_ACSR1_2A_BYTE16_17_HD_3G 0x248
#define GS2970_REG_ACSR1_2A_BYTE18_19_HD_3G 0x249
#define GS2970_REG_ACSR1_2A_BYTE20_21_HD_3G 0x24A
#define GS2970_REG_ACSR1_2A_BYTE22_HD_3G 0x24B
// 0x24C - 0x24F 保留
#define GS2970_REG_ACSR3_4A_BYTE0_1_HD_3G 0x250
#define GS2970_REG_ACSR3_4A_BYTE2_3_HD_3G 0x251
#define GS2970_REG_ACSR3_4A_BYTE4_5_HD_3G 0x252
#define GS2970_REG_ACSR3_4A_BYTE6_7_HD_3G 0x253
#define GS2970_REG_ACSR3_4A_BYTE8_9_HD_3G 0x254
#define GS2970_REG_ACSR3_4A_BYTE10_11_HD_3G 0x255
#define GS2970_REG_ACSR3_4A_BYTE12_13_HD_3G 0x256
#define GS2970_REG_ACSR3_4A_BYTE14_15_HD_3G 0x257
#define GS2970_REG_ACSR3_4A_BYTE16_17_HD_3G 0x258
#define GS2970_REG_ACSR3_4A_BYTE18_19_HD_3G 0x259
#define GS2970_REG_ACSR3_4A_BYTE20_21_HD_3G 0x25A
#define GS2970_REG_ACSR3_4A_BYTE22_HD_3G 0x25B
// 0x25C - 0x25F 保留
#define GS2970_REG_ACSR1_2B_BYTE0_1_HD_3G 0x260
#define GS2970_REG_ACSR1_2B_BYTE2_3_HD_3G 0x261
#define GS2970_REG_ACSR1_2B_BYTE4_5_HD_3G 0x262
#define GS2970_REG_ACSR1_2B_BYTE6_7_HD_3G 0x263
#define GS2970_REG_ACSR1_2B_BYTE8_9_HD_3G 0x264
#define GS2970_REG_ACSR1_2B_BYTE10_11_HD_3G 0x265
#define GS2970_REG_ACSR1_2B_BYTE12_13_HD_3G 0x266
#define GS2970_REG_ACSR1_2B_BYTE14_15_HD_3G 0x267
#define GS2970_REG_ACSR1_2B_BYTE16_17_HD_3G 0x268
#define GS2970_REG_ACSR1_2B_BYTE18_19_HD_3G 0x269
#define GS2970_REG_ACSR1_2B_BYTE20_21_HD_3G 0x26A
#define GS2970_REG_ACSR1_2B_BYTE22_HD_3G 0x26B
// 0x26C - 0x26F 保留
#define GS2970_REG_ACSR3_4B_BYTE0_1_HD_3G 0x270
#define GS2970_REG_ACSR3_4B_BYTE2_3_HD_3G 0x271
#define GS2970_REG_ACSR3_4B_BYTE4_5_HD_3G 0x272
#define GS2970_REG_ACSR3_4B_BYTE6_7_HD_3G 0x273
#define GS2970_REG_ACSR3_4B_BYTE8_9_HD_3G 0x274
#define GS2970_REG_ACSR3_4B_BYTE10_11_HD_3G 0x275
#define GS2970_REG_ACSR3_4B_BYTE12_13_HD_3G 0x276
#define GS2970_REG_ACSR3_4B_BYTE14_15_HD_3G 0x277
#define GS2970_REG_ACSR3_4B_BYTE16_17_HD_3G 0x278
#define GS2970_REG_ACSR3_4B_BYTE18_19_HD_3G 0x279
#define GS2970_REG_ACSR3_4B_BYTE20_21_HD_3G 0x27A
#define GS2970_REG_ACSR3_4B_BYTE22_HD_3G 0x27B
// 0x27C - 0x27F 保留
#define GS2970_REG_ACSR_BYTE_0_HD_3G 0x280
#define GS2970_REG_ACSR_BYTE_1_HD_3G 0x281
#define GS2970_REG_ACSR_BYTE_2_HD_3G 0x282
#define GS2970_REG_ACSR_BYTE_3_HD_3G 0x283
#define GS2970_REG_ACSR_BYTE_4_HD_3G 0x284
#define GS2970_REG_ACSR_BYTE_5_HD_3G 0x285
#define GS2970_REG_ACSR_BYTE_6_HD_3G 0x286
#define GS2970_REG_ACSR_BYTE_7_HD_3G 0x287
#define GS2970_REG_ACSR_BYTE_8_HD_3G 0x288
#define GS2970_REG_ACSR_BYTE_9_HD_3G 0x289
#define GS2970_REG_ACSR_BYTE_10_HD_3G 0x28A
#define GS2970_REG_ACSR_BYTE_11_HD_3G 0x28B
#define GS2970_REG_ACSR_BYTE_12_HD_3G 0x28C
#define GS2970_REG_ACSR_BYTE_13_HD_3G 0x28D
#define GS2970_REG_ACSR_BYTE_14_HD_3G 0x28E
#define GS2970_REG_ACSR_BYTE_15_HD_3G 0x28F
#define GS2970_REG_ACSR_BYTE_16_HD_3G 0x290
#define GS2970_REG_ACSR_BYTE_17_HD_3G 0x291
#define GS2970_REG_ACSR_BYTE_18_HD_3G 0x292
#define GS2970_REG_ACSR_BYTE_19_HD_3G 0x293
#define GS2970_REG_ACSR_BYTE_20_HD_3G 0x294
#define GS2970_REG_ACSR_BYTE_21_HD_3G 0x295
#define GS2970_REG_ACSR_BYTE_22_HD_3G 0x296
// 0x297 保留

/* GS2970 寄存器部分位和值定义 */
#define GS2970_AMCLK_SEL (0x03)
#define GS2970_AMCLK_128FS 0
#define GS2970_AMCLK_256FS 1
#define GS2970_AMCLK_512FS 2

#define GS2970_RATE_SEL_READBACK (0x03 << 14)
#define GS2970_M (0x01 << 13)
#define GS2970_SDT_LOCK (0x01 << 12)
#define GS2970_INT_PROG (0x01 << 11) /* interlaced: 1 progressive: 0 */

#define GS2970_LSB_FIRSTD_SD (0x01 << 7)
#define GS2970_LSB_FIRSTC_SD (0x01 << 6)
#define GS2970_LSB_FIRSTB_SD (0x01 << 5)
#define GS2970_LSB_FIRSTA_SD (0x01 << 4)
#define GS2970_IDA (0x03)
#define GS2970_IDB (0x03 << 2)

#define GS2970_ASWLD_SD (0x03 << 14)
#define GS2970_ASWLC_SD (0x03 << 12)
#define GS2970_ASWLB_SD (0x03 << 10)
#define GS2970_ASWLA_SD (0x03 << 8)
#define GS2970_AMD_SD (0x03 << 6)
#define GS2970_AMC_SD (0x03 << 4)
#define GS2970_AMB_SD (0x03 << 2)
#define GS2970_AMA_SD (0x03)

#define GS2970_OP1_SRC (0x07)
#define GS2970_OP2_SRC (0x07 << 3)
#define GS2970_OP3_SRC (0x07 << 6)
#define GS2970_OP4_SRC (0x07 << 9)
#define GS2970_OP5_SRC (0x07)
#define GS2970_OP6_SRC (0x07 << 3)
#define GS2970_OP7_SRC (0x07 << 6)
#define GS2970_OP8_SRC (0x07 << 9)

#define GS2970_ASWLB_HD (0x03 << 10)
#define GS2970_ASWLA_HD (0x03 << 8)
#define GS2970_AMB_HD (0x03 << 6)
#define GS2970_AMA_HD (0x03 << 4)

#define GS2970_MUTE8 (0x1 << 7)
#define GS2970_MUTE7 (0x1 << 6)
#define GS2970_MUTE6 (0x1 << 5)
#define GS2970_MUTE5 (0x1 << 4)
#define GS2970_MUTE4 (0x1 << 3)
#define GS2970_MUTE3 (0x1 << 2)
#define GS2970_MUTE2 (0x1 << 1)
#define GS2970_MUTE1 (0x1 << 0)

enum 
{
	GS2970_SDI_SD_STA = 0,
	GS2970_SDI_HD_STA,
	GS2970_SDI_3G_STA
};

enum
{
	GS2970_59_94_FPS = 0,
	GS2970_60_FPS
};

#define MIN_RESET_PULSE_WIDTH 10 /* datasheet need min 10ms */
#define GS2970_CHECK_COUNT 5 /* 读检测次数 */

BOOL HWL_Gs2970_SPI_Read_All_Reg(HANDLE32 Handle, void *pUserPara, S32 chn);
#endif /* HWL_SDI_SPI_H */
/* EOF */

